<!DOCTYPE html>
<html>
 <head>
   <meta charset="utf-8">
   <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
   <meta content="yes" name="apple-mobile-web-app-capable">
   <meta content="black" name="apple-mobile-web-app-status-bar-style">
   <meta content="telephone=no" name="format-detection">
   <meta content="email=no" name="format-detection">
   <title>标题</title>
   <link rel="shortcut icon" href="/favicon.ico">
   <script src="./publish.js"></script>
 </head>
 <body>
   <h3>使用Object.defineProperty实现简单的双向数据绑定</h3>
   <input type="text" id="input" />
   <div id="div"></div>
   <script>
       var obj = {
          name:'张三',
          age:100,
          address:'湖南'
       };
       var inputVal = document.getElementById("input");
       var div = document.getElementById("div");

       inputVal.addEventListener('input', function(e){
            obj.name = e.target.value;
       });

       for(var  key  in obj){ 
          Object.defineProperty(obj, key, {
            set: function(newVal) {
                Event.trigger('change',newVal)
            }
          });

       }

       Event.listen('change',function(newVal){
         //  inputVal.value = newVal;
            div.innerHTML = newVal;
            console.log(obj)
       })

   </script>
 </body>
</html>